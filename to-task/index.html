<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task List with Calendar</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Flatpickr CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
  <div class="container mt-4">
    <h1 class="mb-4">Task List</h1>

    <!-- Task Name Input -->
    <div class="mb-3">
      <label for="taskname" class="form-label">Task Name</label>
      <input type="text" class="form-control" id="taskname" placeholder="Enter task name">
    </div>

    <!-- Calendar Input -->
    <div class="mb-3">
      <label for="calender" class="form-label">Pick a Date</label>
      <input type="text" class="form-control" id="calender" placeholder="Select a date">
    </div>

    <button id="submit" class="btn btn-primary mb-4">Add Task</button>

    <!-- Table -->
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Task Name</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody id="tbody1"></tbody>
    </table>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // initialize Flatpickr on the Bootstrap input
      const mydate = document.getElementById("calender");
      const fp = flatpickr(mydate, {
        dateFormat: "d-m-Y",
        altInput: true,
        altFormat: "F j, Y",
        allowInput: true
      });

      let count = 1;
      const submit = document.getElementById("submit");
      const taskname = document.querySelector("#taskname");
      const tbody1 = document.getElementById("tbody1");

      submit.addEventListener("click", () => {
        const task_name = taskname.value.trim();
        const calender_name = mydate.value.trim();

        if (task_name === "" || calender_name === "") {
          alert("Please enter both task name and date");
          return;
        }

        // create a new table row
        const row1 = document.createElement("tr");
        row1.innerHTML = `
          <td>${count++}</td>
          <td>${task_name}</td>
          <td>${calender_name}</td>
        `;

        tbody1.appendChild(row1);

        // clear inputs
        taskname.value = "";
        fp.clear(); // clears Flatpickr date properly
      });
    });
  </script>
</body>
</html>
